version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - bot_challenge
  - book_hotel
  - book_hotel_time
  - book_hotel_location
  - cancel_reservation
  - provide_number_reservation
  - ask_menu_of_the_day
  - ask_menu
  - book_hotel_summary
  - book_restaurant
  - book_restaurant_date
  - book_restaurant_hour 
  - book_restaurant_time
  - book_restaurant_persons
  - book_restaurant_reservation_name
  - book_restaurant_phone_number
  - book_restaurant_comment
  - book_restaurant_summary
  - book_restaurant_final

  - say_hello

entities:
  - date
  - city
  - number_reservation
  - rest_date
  - rest_hour
  - persons
  - name
  - phone_number
  - comment

actions:
  - action_save_reservation
  - action_hello_world
  - action_insert_test
  - action_get_reservations
  - action_validate_reservation_number
  - action_cancel_reservation
  - action_menu_of_day
  - action_check_and_handle_reservation
  - action_update_comment_reservation

slots:
  city:
    type: text
    mappings:
    - type: from_entity
      entity: city
  
  date:
    type: text
    mappings:
    - type: from_entity
      entity: date
  
  rest_hour:
    type: text
    mappings:
    - type: from_entity
      entity: rest_hour
  
  persons:
    type: text
    mappings:
    - type: from_entity
      entity: persons

  name:
    type: text
    mappings:
    - type: from_entity
      entity: name

  rest_date:
    type: text
    mappings:
    - type: from_entity
      entity: rest_date

  number_reservation:
    type: text
    mappings:
    - type: from_entity
      entity: number_reservation

  phone_number:
    type: text
    mappings:
    - type: from_entity
      entity: phone_number
  
  comment:
    type: text
    mappings:
    - type: from_entity
      entity: comment
  
  reservation_valid:
    type: bool
    mappings:
    - type: custom


responses:
  utter_greet:
  - text: "Bonjour, comment puis-je vous aider ?"

  utter_goodbye:
  - text: "Au revoir"

  utter_iamabot:
  - text: "Je suis un bot qui va renverser le monde ü§ñ"

  utter_ask_hotel_time:
  - text: "Quand souhaitez-vous r√©server votre chambre d'h√¥tel ?"

  utter_ask_hotel_location:
  - text: "Dans quelle ville souhaitez-vous r√©server votre chambre d'h√¥tel ?"

  utter_ask_hotel_summary:
  - text: "R√©sum√© de votre r√©servation : Vous souhaitez r√©serv√© une chambre √† {city} √† la date {date}. Confirmez-vous ?"

  utter_booked_hotel:
  - text: "Votre chambre d'h√¥tel a bien √©t√© r√©serv√©e."

  utter_ask_restaurant_date:
  - text: "Quand souhaitez-vous r√©server votre table au restaurant ?"

  utter_booked_restaurant_hour:
  - text: "A quelle heure souhaitez-vous r√©server votre table au restaurant ?"

  utter_ask_restaurant_time:
  - text: "A quelle date souhaitez-vous r√©server votre table au restaurant ?"

  utter_booked_restaurant_persons:
  - text: "Pour combien de personnes souhaitez-vous r√©server votre table au restaurant ?"

  utter_booked_restaurant_name:
  - text: "Sous quel nom souhaitez-vous r√©server votre table au restaurant ?"

  utter_booked_restaurant_summary_with_comment:
  - text: "R√©sum√© de votre r√©servation : Vous souhaitez r√©server une table au restaurant pour {persons} √† la date {rest_date} √† l'heure {rest_hour} sous le nom de {name} avec le num√©ro de t√©l√©phone {phone_number} et le commentaire suivant : {comment}. Confirmez-vous ?"

  utter_booked_restaurant_summary_without_comment:
  - text: "R√©sum√© de votre r√©servation : Vous souhaitez r√©server une table au restaurant pour {persons} √† la date {rest_date} √† l'heure {rest_hour} sous le nom de {name} avec le num√©ro de t√©l√©phone {phone_number} sans commentaires. Confirmez-vous ?"

  utter_deny_book_restaurant:
  - text: "Votre r√©servation n'a pas √©t√© enregistr√©e."
  
  utter_booked_restaurant_final:
  - text: "Votre r√©servation au restaurant a bien √©t√© enregistr√©e."
  
  utter_confirm_cancel_reservation:
  - text: "Voulez-vous vraiment annuler votre r√©servation num√©ro {number_reservation} ?"

  utter_deny_cancel_reservation:
  - text: "Votre r√©servation n'a pas √©t√© annul√©e."

  utter_ask_number_reservation:
  - text: "Veuillez me donner votre num√©ro de r√©servation."

  utter_booked_restaurant_phone_number:
  - text: "Quel est votre num√©ro de t√©l√©phone ?"

  utter_booked_restaurant_comment:
  - text: "Avez-vous un commentaire √† ajouter √† votre r√©servation ?"

  utter_ask_new_comment:
  - text: "Quel nouveau commentaire souhaitez-vous ajouter √† votre r√©servation ?"

  utter_booked_restaurant_add_comment:
  - text: "Souhaitez-vous ajouter un commentaire √† votre r√©servation ?"

  utter_ask_validate_modification:
    - text: "Souhaitez-vous valider la modification de votre r√©servation ?"

  utter_menu:
  - text: "Cliquez sur le lien pour voir le menu du jour : http://www.lumberjackpizza.fr/wafx_res/Files/Flyer%20Nantes-2.jpg"
  - text: "Cliquez ici: http://www.lumberjackpizza.fr/wafx_res/Files/Flyer%20Nantes-2.jpg"
  - text: "Lien vers la carte: http://www.lumberjackpizza.fr/wafx_res/Files/Flyer%20Nantes-2.jpg"
  - text: "Cliquer ici pour acc√©der √† la http://www.lumberjackpizza.fr/wafx_res/Files/Flyer%20Nantes-2.jpg"
  - text: "Cliquez sur le lien pour voir le menu du jour : http://perdu.com/"

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
